<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.rtl.min.css"
      integrity="sha384-DOXMLfHhQkvFFp+rWTZwVlPVqdIhpDVYT9csOnHSgWQWPX0v5MCGtjCJbY6ERspU"
      crossorigin="anonymous"
    />

    <script src="vueversion3.js"></script>
    <title>Product App</title>

    <!-- <style>
        *{
            border: 1px solid red;
        }
    </style> -->
  </head>
  <body>
    <div id="mainpage">
      <div class="container">
        <!--start of container-->
        <div
          class="align-center bg-dark mx-auto my-3 pt-1"
          style="height: 10vh"
        >
          <div
            class="d-flex align-center w-75 mx-auto mt-3 justify-content-between"
          >
            <a href="#" @click.prevent="wathcingList=false" class="text-decoration-none fw-bold h5 text-warning pt-2">books</a>
            <div class="d-flex align-center justify-content-between" style="width: 9rem;">
            <button class="btn btn-primary" @click="wathcingList=true">watch list</button>
            <span class="text-light py-2 ">{{bookList.length}} book</span>
            </div> 
          </div>
        </div>

        <div class="row" v-if="wathcingList==false">
          <div class="col-4 mt-3" v-for="bok in books" >
            <div class="card" style="width: 18rem">
              <img :src="bok.image" :alt="bok.title" class="card-img-top" style="height: 50%;" />
                
                <div class="container">
                   <div class="row align-center">
                     <p class="col h5 fw-bold">{{bok.name}}</p>
                     <p class="col-auto fw-bolder">{{bok.category}}</p>
                   </div>
                   <div class="row">
                     <p class="col">{{bok.numberOfPages}}</p>
                     <p class="col-auto fw-bold">{{bok.author}}</p>
                   </div>
                    <div class="row">
                     <p class="col">#{{bok.ISBN}}</p>
                     <button class="btn btn-primary col-auto" :disabled="bok.sold==true"  @click="addToWatchList(bok)" >Add To List</button>
                   </div>

                </div>
                
              </div>
            </div>
          </div>
        </div>
        
  <div v-if="wathcingList==true && bookList.length">      
  <table class="table" >
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Price</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="it in bookList">
      <td>{{it.name}}</td>
      <td>{{it.price}}</td>
      <td><button class="btn btn-danger" @click="deleteButton(it)">delete</button></td>
    </tr>
  </tbody>
</table>

<table class="table-stripped text-center w-75 mx-auto">
  <tr class="bg-light">
      <td>Price = {{totalPrice}}</td>
    </tr>
    <tr class="bg-info">
    <td>Total Price After Taxes = {{totalPrice*0.2}}</td>
    </tr>
</table>
 
</div>

        <div class="h1 text-center" v-if="wathcingList==true && ! bookList.length">No books in your list</div>
      </div>
      <!--end of container-->
    </div>
    <!--end of main page-->


































































    <script src="books.js"></script>
    <!--create books-->

    <script>
      let app = Vue.createApp({
        data: () => ({
          books: books,
          bookList:[],
          marked:false,
          wathcingList:0,
          totalPrice:0,
        }),
        methods: {
          addToWatchList(book){
            this.bookList.push(book)
              book.sold=true;
              this.totalPrice+=book.price;
              console.log("added");
          },
          deleteButton(book) {
          let index = this.bookList.findIndex(item => item.name === book.name);
          book.sold=false;  
            this.totalPrice -= this.bookList[index].price;
            this.bookList.splice(index, 1);
            console.log("deleted");

        },
        },
    
      });
     
      app.mount("#mainpage");
    </script>
    <!-- end of vue instance-->
  </body>
</html>
